function shift(e,t,n,r){var i=d3.sum(e);var s=d3.sum(t);var o=0;for(var u=0;u<e.length;u++){o+=e[u]*n[u]}o=o/i;var a=0;for(var u=0;u<t.length;u++){a+=t[u]*n[u]}a=a/s;var f=Array(e.length);var l=Array(e.length);var c=0;for(var u=0;u<e.length;u++){c=t[u]/s-e[u]/i;f[u]=(n[u]-o)*c;if(c>0){l[u]=2}else{l[u]=0}if(n[u]>o){l[u]+=1}}var h=Array(e.length);for(var u=0;u<e.length;u++){h[u]=u}h.sort(function(e,t){return Math.abs(f[e])<Math.abs(f[t])?1:Math.abs(f[e])>Math.abs(f[t])?-1:0});var p=Array(e.length);var d=Array(e.length);var v=Array(e.length);var m=Array(e.length);for(var u=0;u<e.length;u++){p[u]=f[h[u]];d[u]=l[h[u]];v[u]=r[h[u]];m[u]=words_en[h[u]]}var g=[0,0,0,0];for(var u=0;u<e.length;u++){g[l[u]]+=f[u]}return{sortedMag:p,sortedType:d,sortedWords:v,sortedWordsEn:m,sumTypes:g,refH:o,compH:a}}
